## Сетевое взаимодействие
На сегодняшний день использование клиентов служб мгновенного обмена сообщениями (instant messanger) стало незаменимым средством для всех пользователей Интернета. Существует множество клиентов (Skype, WhatsApp, Viber, ICQ и т. д.), о которых каждый слышал и которые мы ежедневно используем. Все они работают по определенным правилам, т.е. реализуют определенные протоколы взаимодействия.

Наиболее распространенный протокол **HTTP** (**Hyper Text Transfert Protocol**) определяет взаимодействие двух программ, клиента и сервера, которые могут быть запущены на разных и удаленных друг от друга машинах. **Клиентом** является приложение, которое пользуется каким-то сервисом, предоставляемым **сервером**, обычно размещенном на удаленном компьютере. Клиент должен подключиться к удаленному серверу, который постоянно находится в режиме ожидания соединения. После этого они могут обмениваться информацией.

*HTTP* использует протокол **TCP/IP**.

Распределение протоколов по уровням модели *TCP/IP*:
| Layer | Protocol and Service |
|:---:|:---|
| Application |	HTTP, RTP, FTP, DNS |
| Transport | TCP, UDP, SCTP, DCCP |
| Internet |	IP. ICMP, ARP, IGMP based on IP |
| Network Access	| Ethernet, IEEE 802.11 Wireless Ethernet, SLIP, Token Ring, ATM и MPLS |

Протокол *HTTP* располагается на прикладном уровне и использует для собственной реализации протоколы более низких уровней. Основой *HTTP* является протокол транспортного уровня *TCP*.

Согласно протоколу **IP** (**Internet Packet**), каждый узел (компьютер, switch и т.п.) в сети имеет свой IP-адрес. На данный момент интернет работает по протоколу **IPv4**, где IP адрес записывается 4 числами от 0 до 255 - например, 127.0.0.1. Существует и другой способ идентификации компьютеров в сети через доменное имя, которое более удобное и нагляднее идентифицирует компьютер, чем простой набор чисел (например, github.com). В Интернете существуют специальные сервера **DNS** (Domain Name System), которые осуществляют преобразование доменного имени в IP-адрес и наоборот.

**TCP** протокол базируется на IP для доставки пакетов, но добавляет два важных свойства :
- установление соединения между приложениями
- использование портов (не просто узлов)

Таким образом, для идентификации компьютера (**host**) в сети используется IP-адрес; для идентификации приложения TCP добавляет понятие порта. **Порт** - это целое число от 1 до 65535 указывающее, какому приложению предназначается пакет.

Java имеет достаточно простой в использовании встроенный сетевой интерфейс, который упрощает связь через сокеты *TCP/IP* или *UDP*. *TCP* обычно используется чаще, чем *UDP*.


### TCP Networking
Обычно клиент открывает *TCP/IP*-соединение с сервером. Затем клиент начинает обмениваться информацией с сервером. Когда клиент завершает работу с сервером, он закрывает соединение.

![Java TCP Networking Basics](res/img/java-tcp-networking.png)

Клиент может отправлять несколько запросов через открытое соединение. Фактически, клиент может отправлять столько данных, сколько сервер готов к приему. Сервер также может закрыть соединение, если он захочет.


### UDP Networking
UDP работает немного иначе, чем *TCP*. Используя *UDP*, соединение между клиентом и сервером отсутствует. Клиент может отправлять данные на сервер, и сервер может (или не может) получать эти данные. Клиент никогда не узнает, были ли данные получены на другом конце. То же самое верно для данных, отправленных другим способом от сервера к клиенту.

Поскольку нет гарантии доставки данных, протокол *UDP* имеет меньшие накладные расходы протокола.